<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layout/default">
	  
	<th:block layout:fragment="customTitle">
		<title th:text="${title}"></title> 
	</th:block>
	
	<th:block layout:fragment="customContent">
	<link rel="stylesheet" href="/fullcalendar/fullcalendar.css">
	<style type="text/css">
	.test{
	margin-left: 1%; 
	font-weight: 700;	
	}		
	</style>
	
	<script type="text/javascript" th:inline="javascript">
	/*<![CDATA[*/
	   
    	var holiCodeList = /*[[${holiCodeList}]]*/
		console.log(holiCodeList);
		
   /*]]>*/
	</script>
	<script>
		$(function(){
			for(i=0;i<holiCodeList.length;i++){
				$('.fc-day').each(function(){
					var dataDate = $(this).attr('data-date');					
					if(holiCodeList[i].hdStartDay <= dataDate && holiCodeList[i].hdEndDay >= dataDate){
						$(this).find('.fc-daygrid-day-events').text(holiCodeList[i].hdName);	
					}
				})
			}
		})
	</script>
	
		

<!------------------- 코딩 소스 들어갈곳 Start ---------------------------------------------->
	<!-- 메뉴설명 -->
	<div class="app-main__inner">
	<div class="app-page-title">
        <div class="page-title-wrapper">
            <div class="page-title-heading">
                <div class="page-title-icon">
                    <i class="pe-7s-date icon-gradient bg-premium-dark">
                    </i>
                </div>
                <div>휴일 설정
                    <div class="page-title-subheading">휴일 일정을 관리합니다.
                    </div>
                </div>
            </div>   
         </div>
    </div> 
    
    	<!-- 코드등록버튼 -->
		
		<button type="button" class="btn btn-primary addHdCode" data-toggle="modal" data-target="#myModal" >휴일등록</button>		
			<div class="main-card mb-10 card table-padding">

    <div id="Scalendar"></div>
    		<script>
			    document.addEventListener('DOMContentLoaded', function() {
			        var calendarEl = document.getElementById('Scalendar');
			
			        var calendar = new FullCalendar.Calendar(calendarEl, {
			          timeZone: 'UTC',
			          initialView: 'dayGridMonth',
			          headerToolbar: {
			            left: 'prev,next today',
			            center: 'title', //',addEventButton'
			            right: 'dayGridMonth,timeGridWeek,timeGridDay'
			          },
			          /* customButtons: {
			              addEventButton: {
			                text: 'add event...',
			                click: function() {
			                var title = prompt('명칭을 입력해주세요');
			                  var dateStr = prompt('시작일을 입력해주세요 (ex: YYYY-MM-DD format)');
			                  var dateEnd = prompt('종료일을 입력해주세요 (ex: YYYY-MM-DD format)')
			                  var date = new Date(dateStr + 'T00:00:00'); // will be in local time
			                  var dateEnd = new DateEnd(dateEnd + 'T00:00:00'); // will be in local time

			                  if (!isNaN(date.valueOf())) { // valid?
			                    calendar.addEvent({
			                      title: title,
			                      start: date,
			                      end: dateEnd,
			                      allDay: true
			                    });
			                    alert('Great. Now, update your database...');
			                  } else {
			                    alert('Invalid date.');
			                  }
			                }
			              }
			          } */
			        
			    
			          	
			            navLinks: true, 
			            editable: false,
			            displayEventTime: false,
			            slotEventOverlap: false,
			            allDaySlot: false
			            
			
			        })
			        calendar.render();
			      });

        
    		</script>
    	</div>
    </div>
    	
 <!-- 일정 추가 MODAL -->
        <div class="modal fade" tabindex="-1" role="dialog" id="myModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title"></h4>
                    </div>
 			<form action="/addHdCode" method="post" id="addHdCode">
                    <div class="modal-body">                           
                            <div class="form-group">
                                <label class="col-form-label test" for="hdName" >일정명 :</label>
                                <input class="form-control" type="text" name="hdName" id="hdName"/>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label test" for="regStaffName" >등록자 :</label>
                                <input class="form-control" type="text" name="regStaffName" id="regStaffName" th:value="${session.SSTAFFNAME}" readonly/>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 test" for="hdStartDay">시작</label>
                                <input class="form-control" type="date" name="hdStartDay" id="hdStartDay" />
                            </div>
                            <div class="form-group">
                                <label class="col-xs-4 test" for="hdEndDay">끝</label>
                                <input class="form-control" type="date" name="hdEndDay" id="hdEndDay" />
                            </div>
                        
                       
                            <div class="form-group">
                                <label class="col-xs-4 test" for="hdContents">내용</label>
                                <textarea rows="3" cols="65" class="form-control" name="hdContents"
                                    id="hdContents"	 style="resize: none;"></textarea>
                        </div>
                    </div>
			</form>
                    <div class="modal-footer modalBtnContainer-addEvent">
                        <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
                        <button type="button" class="btn btn-primary saveHdCode" id="save-event">저장</button>
                    </div>
                    
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

      
<script src="/fullcalendar/fullcalendar.js"></script>
<script src="/fullcalendar/fullcalendar.min.js"></script>
<script src="/fullcalendar/locales-all.js"></script>





<!------------------- 코딩 소스 들어갈곳 End ------------------------------------------------>
	
	</th:block>
	
	<th:block layout:fragment="customJsScript">
		<script>
		
		//유효성검사
		$(function(){
			$('.saveHdCode').click(function(){
				
				
				var hdName = $('input[name="hdName"]');
				var hdStartDay = $('input[name="hdStartDay"]');
				var hdEndDay = $('input[name="hdEndDay"]');
				var hdContents = $('input[name="hdContents"]');
				
				if(hdName.val() == ''){
					alert('일정명을 입력해주세요.');
					hdName.focus();
					return false;
				}else if(hdStartDay.val() == ''){
					alert('시작일을 선택해주세요.');				
					return false;
				}else if(hdEndDay.val() == ''){
					alert('종료일을 선택해주세요.');
					return false;
				}else if(hdContents.val() == ''){
					alert('내용을 입력해주세요.');
					hdContents.focus();
					return false;
				}
				$('#addHdCode').submit();
				alert('휴일등록 완료.');
			})
		});
		</script>
	</th:block>
	
    
</html>
