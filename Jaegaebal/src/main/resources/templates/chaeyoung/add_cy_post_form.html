<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layout/default">
	 <th:block layout:fragment="customCss">


<link rel="stylesheet" href="summernote/summernote-lite.css">
	 	<style>
.index-front{
   z-index:1;
}


.center-form{
   width:49%;
   float:left;
}
.right-form{
   width:49%;
   float:right;
}
	 	</style>
	 </th:block>
	<th:block layout:fragment="customTitle">
		<title th:text="${title}"></title> 
	</th:block>
	
	<th:block layout:fragment="customContent">
<!------------------- 코딩 소스 들어갈곳 Start ---------------------------------------------->
	<div class="app-main__inner">
		<div class="app-page-title">
            <div class="page-title-wrapper">
                <div class="page-title-heading">
                   	채용공고 등록
				</div>
                   <div class="page-title-actions">
                       <button type="button" data-toggle="tooltip" title="" data-placement="bottom" class="btn-shadow mr-3 btn btn-dark" data-original-title="버티는게 이기는 것이다.">
                        <i class="fa fa-star"></i>
                       </button>

                   </div>    
             </div>
         </div> 

			<!-- 조회한 게시글 화면  -->
			<th:block th:if="${cyboard != null}">
				<div class="row">
		  			<div class="col-md-12">
		              <div class="main-card mb-3 card">
		                  <div class="card-body"><h5 class="card-title">구인공고등록</h5>                     
							<form action="/updateCYPost" method="post">
		                      <div class="position-relative form-group"><label>채용부서</label><select name="jobJojicCode" id="jobFieldCode" class="form-control">
                    			<option th:each="j : ${jojicCode}" th:value="${j.jojicCode}" th:text="${j.jojicName}" th:selected="${cyboard.jobJojicCode eq j.jojicCode}"></option>
		                      </select></div>
		                      <div class="position-relative form-group index-front">
		                	      <input type="hidden" name="jobJojicName" th:value="${cyboard.jobJojicName}">	   
		                	      <input type="hidden" name="jobNumber" th:value="${cyboard.jobNumber}">	   
		                      <div class="position-relative form-group center-form"><label>경력구분</label><select name="jobCareer" id="jobCareer" class="form-control">
		                          <option value="신입" th:selected="${cyboard.jobCareer eq '신입'}">신입</option>
		                          <option value="경력" th:selected="${cyboard.jobCareer eq '경력'}">경력</option>
		                          <option value="신입/경력" th:selected="${cyboard.jobCareer eq '신입/경력'}">신입/경력</option>
		                      </select></div>
		                      <div class="position-relative form-group right-form"><label>지원마감일</label><input name="jobDeadLine" id="jobDeadLine" type="date" class="form-control" th:value="${cyboard.jobDeadLine}"></div>
		                      </div>
		                      <div class="position-relative form-group"><label>제목</label><input name="jobTitle" id="jobTitle" placeholder="제목" type="text" class="form-control"  th:value="${cyboard.jobTitle}"></div>
		                      <textarea id="summernote" name="jobContent" th:text=${cyboard.jobContent}></textarea>
		                      <div class="position-relative form-group"><label for="exampleFile" class="">첨부파일</label><input name="docFile" id="docFile" type="file" class="form-control-file">
		                      </div>             
		                     	<div class="d-block text-center">
		                            <button class="mb-2 mr-2 btn btn-info" type="submit">수정하기</button>
		                            <button class="mb-2 mr-2 btn btn-danger" type="button" id="cyPostDelete"><i class="pe-7s-trash btn-icon-wrapper"> </i>삭제하기</button>
	       						</div>             
							</form>
		                  </div>
		              </div>
		          </div>
				</div>
			</th:block>
				<!-- 초기 게시글 등록화면 -->
			<th:block th:if="${cyboard == null}">
				<div class="row">
		  			<div class="col-md-12">
		              <div class="main-card mb-3 card">
		                  <div class="card-body"><h5 class="card-title">구인공고등록</h5>                     
							<form id="addPost" action="/addCYPost" method="post">
		                      	<div class="position-relative form-group"><label>채용부서</label><select name="jobJojicCode" id="jojicCode" class="form-control">
                    				<option th:each="j : ${jojicCode}" th:value="${j.jojicCode}" th:text="${j.jojicName}"></option>
		                     	 </select></div>
		                      <div class="position-relative form-group index-front">
									<input type="hidden" name="jobJojicName" id="jobJojicName">	                      
		                      <div class="position-relative form-group center-form"><label>경력구분</label><select name="jobCareer" id="jobCareer" class="form-control">
		                          <option value="신입">신입</option>
		                          <option value="경력">경력</option>
		                          <option value="신입/경력">신입/경력</option>
		                      </select></div>
		                      <div class="position-relative form-group right-form"><label>지원마감일</label><input name="jobDeadLine" id="jobDeadLine" type="date" class="form-control"></div>
		                      </div>
		                      <div class="position-relative form-group"><label>제목</label><input name="jobTitle" id="jobTitle" placeholder="제목" type="text" class="form-control"></div>
		                      <textarea id="summernote" name="jobContent"></textarea>
		                      <div class="position-relative form-group"><label for="exampleFile" class="">첨부파일</label><input name="docFile" id="docFile" type="file" class="form-control-file">
		                      </div>             
		                      <div align="center"><button class="mt-1 btn btn-primary" type="button" id="addcyPostBtn">등록하기</button></div>               
							</form>
		                  </div>
		              </div>
		          </div>
		        </div>
			</th:block>
		</div>
				
<!------------------- 코딩 소스 들어갈곳 End ------------------------------------------------>
		
	</th:block>
		<th:block layout:fragment="customJsScript">

	
		<script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>
		
		<!-- include summernote css/js -->
		

		<script src="/summernote/summernote-lite.js"></script>
		<script src="/summernote/lang/summernote-ko-KR.js"></script>


		
		<script type="text/javascript">
			$(function() {
		
				$(document).ready(function() {
					//여기 아래 부분
					$('#summernote').summernote({
						  height: 300,                 // 에디터 높이
						  minHeight: null,             // 최소 높이
						  maxHeight: null,             // 최대 높이
						  focus: true,                  // 에디터 로딩후 포커스를 맞출지 여부
						  lang: "ko-KR",					// 한글 설정
						  placeholder: '내용을 입력하세요'	//placeholder 설정
				          
					});
				});
				
				//채용공고등록 유효성검사
				$('#addcyPostBtn').click(function() {
					
					var jojicName = $('#jojicCode option:selected').text(); //셀렉트박스에 노출되는 text를 가져온다.				
					$('#jobJojicName').val(jojicName); //히든 인풋박스에 name 값을 저장
					
					var jobDeadLine = $('#addPost input[name=jobDeadLine]').val(); // 채용마감일
					var jobTitle = $('#addPost input[name=jobTitle]'); // 제목
					var jobContent = $('#addPost textarea[name=jobContent]'); // 내용
			
					if(jobDeadLine == '') {
						alert('마감일을 입력해 주세요');
						return false;
					}else if(jobTitle.val() == '') {
						alert('제목을 입력해 주세요');
						return false;
					}else if(jobContent.val() == '') {
						alert('내용을 입력해 주세요');
						return false;
					}
					  $('#addPost').submit(); 
				});
			});
		</script>
	</th:block>
    
</html>
