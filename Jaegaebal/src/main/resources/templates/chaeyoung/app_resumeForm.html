<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layout/default">
	  
	<th:block layout:fragment="customTitle">
		<title th:text="${title}"></title> 
	</th:block>
	
<th:block layout:fragment="customCss">
		<link rel="stylesheet" type="text/css" th:href="@{/css/insa.css}">
<style>
	.emp-table{
		height:600px;
	}
</style>

</th:block>
	<th:block layout:fragment="customJs">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
	</th:block>
<th:block layout:fragment="customContent">
<!------------------- 코딩 소스 들어갈곳 Start ---------------------------------------------->
<div class="app-main__inner">
	<div class="app-page-title">
        <div class="page-title-wrapper">
            <div class="page-title-heading">
                <div class="page-title-icon">
                    <i class="pe-7s-map icon-gradient bg-premium-dark">
                    </i>
                </div>
                <div>지원자 이력서 등록
                    <div class="page-title-subheading">지원자 이력서 작성/수정/지원취소
                    </div>
                </div>
            </div>   
         </div>
    </div> 
    
    <div class="row">
		<div class="col-lg-4">
			<div class="main-card mb-3 card emp-table">
				<div class="card-body">
					<h5 class="card-title ">기본정보</h5>
						<div th:with="cy = ${chaeYoungApplicant}">
							<table class="mb-0 table table-bordered " >
						
									<tr>
										<td>지원자 접수번호 : </td>
										<td class="appNumCode" th:text=${cy.appNumCode}></td>
									</tr>
									<tr>
										<td>지원자 이메일 : </td>
										<td class="appEmail" th:text=${cy.appEmail}></td>
									</tr>
									<tr>
										<td>지원자 이름 : </td>
										<td th:text=${cy.appName}></td>
									</tr>
									<tr>
										<td>지원자 핸드폰번호 : </td>
										<td th:text="${cy.appPhone}"></td>
									</tr>
									<tr>
										<td>지원상태 : </td>
										<td th:text="${cy.appFinalState}"></td>
									</tr>

							</table>
							<input type="hidden" th:value="${cy.appPassward}" class="hiddenPw">
						</div>
				<div class="d-block text-center card-footer">
                    <button class="mr-2 btn-icon btn-icon-only btn btn-outline-danger appDelete"><i class="pe-7s-trash btn-icon-wrapper deleteApp"> </i>지원취소하기</button>
                </div>
                <!-- 관리자 권한일 경우 이 div가 노출 -->
                <div class="text-center">                                                 
                 	<button type="button" id="PopoverCustomT-1" class="mb-2 mr-2 btn-transition btn btn-outline-success">합격</button>
                    <button type="button" id="PopoverCustomT-1" class="mb-2 mr-2 btn-transition btn btn-outline-danger">불합격</button>                            
                </div>
					
			
				</div>
			</div>
		</div>
				<div class="col-md-8">
					<div class="main-card card">
						<div class="card-body p-b-xs emp-table">
							<h5 class="card-title">추가 기입 정보</h5>
						
                            <div class="card-header">
                                <div class="btn-actions-pane-right">
                                    <div class="nav">
                                        <a data-toggle="tab" href="#isStaffBasicInfo" class="btn-pill btn-wide mr-1 m-b-xs active btn btn-outline-alternate btn-sm">인적사항</a>                   
                                        <a data-toggle="tab" href="#isCareerInfoFromOut" class="btn-pill btn-wide mr-1 m-b-xs btn btn-outline-alternate btn-sm">사외경력</a>
                                        <a data-toggle="tab" href="#isCertificateInfo" class="btn-pill btn-wide mr-1 m-b-xs btn btn-outline-alternate btn-sm">자격정보</a>
                                        <a data-toggle="tab" href="#isEducationInfo" class="btn-pill btn-wide mr-1 m-b-xs btn btn-outline-alternate btn-sm">학력정보</a>
                                        <a data-toggle="tab" href="#isMilitaryInfo" class="btn-pill btn-wide btn m-b-xs btn-outline-alternate btn-sm">병역정보</a>
                                    </div>
                                </div>
                          	</div>
                            <div class="card-body">
                                <div class="tab-content">
                                    <div class="tab-pane active" id="isStaffBasicInfo" role="tabpanel">
										<form action="/test" method="post">
											<table class="mb-12 table table-bordered">
												<colgroup>
													<col width = "12%">
													<col width = "30%">
													<col width = "15%">
													<col width = "43%">
												</colgroup>
												<tr>
													<td class="t_head2">영문 이름</td>
													<td>
														<input type="text" name="appEmail" class="form-control">
													</td>
													<td class="t_head2">영문 성</td>
													<td>
														<input type="text" name="appEmail" class="form-control">
													</td>
												</tr> 
												<tr>													
													<td class="t_head2">성별</td>
													<td>
														<label><input type="radio" name="staff_gender" value="여" checked="checked"> 여</label>
														<label><input type="radio" name="staff_gender" value="남"> 남</label>													
													</td>
													<td class="t_head2">주민등록번호</td>
													<td class="inputmaineus">
														<input type="text" name="human_num1" class="form-control input-width21" >
														<span class="span-font">-</span>
														<input type="text" name="human_num2" class="form-control input-width22" >
													</td>
												</tr> 
												<tr>
													<td class="t_head2">내외국인</td>
													<td>
														<label><input type="radio" name="staff_nationality" value="내국인" checked="checked" class="staff-nationality-input"> 내국인</label>
														<label><input type="radio" name="staff_nationality" value="외국인" class="staff-nationality-input"> 외국인</label>
													<td class="t_head2">국적</td>
													<td>
														<input type="text" name="staff_country" class="form-control" disabled="disabled">
													</td>
												</tr> 
												<tr>													
													<td class="t_head2">결혼여부</td>
													<td>
														<label><input type="radio" name="staff_marriged" value="미혼" checked="checked"> 미혼 </label>
														<label><input type="radio" name="staff_marriged" value="기혼"> 기혼</label>
													</td>
													<td class="t_head2">연락처</td>
													<td class="inputmaineus">
														<input type="text" name="staff_email" class="form-control phoneNumber" maxlength="13">
													</td>
												</tr> 
												<tr>													
													<td class="t_head2">이메일</td>
													<td>
														<input type="text" name="staff_email" class="form-control">
													</td>
													<td class="t_head2">주소</td>
													<td>
														<input type="text" name="staff_addr" class="form-control" >
													</td>
												</tr> 

											</table>
				                   	    </form>    
                                    </div>
                                    
            						<div class="tab-pane" id="isCareerInfoFromOut" role="tabpanel">
										<form>
											<table class="mb-12 table table-bordered">
												<tr>
													<td class="t_head2">직장명</td>
													<td >
														<input type="text" name="companyName" class="form-control" >
													</td>
													<td class="t_head2">직위</td>
													<td >
														<input type="text" name="companyAccess" class="form-control" >
													</td>
												</tr>
												<tr>
													<td class="t_head2">직책</td>
													<td>
														<input type="text" name="companyPositionFromOut" class="form-control" >
													</td>
													<td class="t_head2">담당업무</td>
													<td>
														<input type="text" name="companyWorkFormOut" class="form-control">
													</td>
												</tr>
												<tr>
													<td class="t_head2">입사일자</td>
													<td>
														<input type="date" name="companyInDateFromOut" class="form-control" >
													</td>
													<td class="t_head2">퇴사일자</td>
													<td>
														<input type="date" name="companyOutDateFromOut" class="form-control" >
													</td>
												</tr>	
												<tr>
													<td class="t_head2">퇴직사유</td>
													<td>
														<textarea name="companyOutReason" class="form-control" ></textarea>
													</td>
												</tr> 												
												<tr>
													<td colspan="8">
														<div class="addDiv"><button type="button" class="font-icon-wrapper btn btn-light addTest"><i class="pe-7s-add-user"></i>입력</button></div>
													</td>
												</tr>
											</table>
				                         </form>                              
                                     </div>
                                     <div class="tab-pane" id="isCertificateInfo" role="tabpanel">
										<form>
											<table class="mb-12 table table-bordered">
												<tr>
													<td class="t_head2">자격증명</td>
													<td colspan="5">
														<input type="text" name="staff_eng_name" class="form-control">
													</td>
												</tr> 
												<tr>
													<td class="t_head2">발급기관</td>
													<td >
														<input type="text" name="staff_country" class="form-control" >
													</td>
													<td class="t_head2">자격번호</td>
													<td>
														<input type="text" name="staff_country" class="form-control" >
													</td>
												</tr>
												<tr>
													<td class="t_head2">취득일</td>
													<td>
														<input type="date" name="staff_phone1" class="form-control">
													</td>
													<td class="t_head2">만료일</td>
													<td>
														<input type="date" name="staff_eng_name" class="form-control">
													</td>
												</tr> 
												<tr>
													<td class="t_head2">비고</td>
													<td colspan="5">
														<textarea name="is_staff_basic_info.notes" class="form-control"></textarea>
													</td>
												</tr> 												
												<tr>
													<td colspan="8">
														<div class="addDiv"><button class="font-icon-wrapper btn btn-light "><i class="pe-7s-add-user"></i>경력추가</button></div>
													</td>
												</tr>

											</table>
				                        </form>                             
                                    </div>
                                    <div class="tab-pane" id="isEducationInfo" role="tabpanel">
										<form>
											<table class="mb-12 table table-bordered">
												<tr>
													<td class="t_head2">학교명</td>
													<td colspan="5">
														<input type="text" name="staff_eng_name" class="form-control">
													</td>
												</tr> 
												<tr>
													<td class="t_head2">전공</td>
													<td >
														<input type="text" name="staff_country" class="form-control" >
													</td>
													<td class="t_head2">부전공</td>
													<td>
														<input type="text" name="staff_country" class="form-control" >
													</td>
												</tr> 
												<tr>												
													<td class="t_head2">학위</td>
													<td>
														<input type="text" name="staff_phone1" class="form-control">
													</td>
													<td class="t_head2">상태</td>
													<td>
														<input type="text" name="staff_eng_name" class="form-control">
													</td>
												</tr> 
												<tr>
													<td class="t_head2">입학일</td>
													<td>
														<input type="date" name="staff_eng_name" class="form-control">
													</td>
													<td class="t_head2">졸업일</td>
													<td>
														<input type="date" name="staff_eng_name" class="form-control">
													</td>												
												</tr>
											</table>
				                        </form>                                   
                                    </div>                                                                                                            
                                                                                                                                             
                                    <div class="tab-pane" id="isMilitaryInfo" role="tabpanel">
										<form>
											<table class="mb-12 table table-bordered">
												<tr>
													<td class="t_head2">군종</td>
													<td colspan="5">
														<input type="text" name="staff_eng_name" class="form-control">
													</td>
												</tr> 
												<tr>
													<td class="t_head2">상태</td>
													<td >
														<input type="text" name="staff_country" class="form-control" >
													</td>
													<td class="t_head2">계급</td>
													<td>
														<input type="text" name="staff_country" class="form-control" >
													</td>
												</tr> 
												<tr>
													<td class="t_head2">입대일자</td>
													<td >
														<input type="date" name="staff_country" class="form-control" >
													</td>
													<td class="t_head2">전역일자</td>
													<td>
														<input type="date" name="staff_country" class="form-control" >
													</td>
												</tr> 												
											</table>
										</form>
		                              <div class="d-block card-footer addDiv">
		                                 <button type="button">임시저장</button>
		                                 <button type="button">등록하기</button>
		                              </div>
                                    </div>                                                                                                            
                                </div>                                             
                             </div>
                         </div>
					</div>
				</div>
			</div>
		</div>

<!------------------- 코딩 소스 들어갈곳 End ------------------------------------------------>
	</th:block>
		
	<th:block layout:fragment="customJsScript">
	<script src="/assets/scripts/chaeyoungBoard.js"></script>
	<script>
		$(function() {
			
			function message(){
				var hiddenPw = $('.hiddenPw').val();
				const swalWithBootstrapButtons = Swal.mixin({
					  customClass: {
					    confirmButton: 'btn btn-success',
					    cancelButton: 'btn btn-danger'
					  },
					  buttonsStyling: false
					})

					swalWithBootstrapButtons.fire({
					  title: '정말로 지원을 포기하시겠습니까?',
					  text: "작성한 데이터는 전부 삭제됩니다.",
					  icon: 'warning',
					  showCancelButton: true,
					  confirmButtonText: '네 포기하겠습니다.',
					  cancelButtonText: '아니오!',
					  reverseButtons: true
					}).then((result) => {
					  if (result.isConfirmed) {
						  pwCheck(hiddenPw)
	
					  }
					})
			}
			//비밀번호 체크
        	function pwCheck(pw){
        		var appEmail = $(".appEmail").text();
        		
        		(async () => {

        			const { value: password } = await Swal.fire({
        			  title: '비밀번호를 입력해 주세요.',
        			  input: 'password',
        			  inputPlaceholder: 'Enter your password',
        			  inputAttributes: {
        			    maxlength: 10,
        			    autocapitalize: 'off',
        			    autocorrect: 'off'
        			  }
        			})

        			if (password) {
        			  if(pw == password) {
 
        				  await Swal.fire(
        					'Deleted!',
        					'지원이 취소되었습니다.',
        					'success'
        					)      				
 
        					location.href="/deleteApplicant?appEmail="+ appEmail;
        			  }else {
        				  await Swal.fire(
        				    	      'fail',
        				    	      '비밀번호가 틀렸습니다',
        				    	      'error')
        				  return false;
        			  }          			
        			}           			
        		})()
        	}
			//지원취소하기
			$('.appDelete').click(function() {
				
				message();
				

			})
			//내국인일 시 국적작성 x 외국인일시 국적작성 o
			$('input[name=staff_nationality]').click(function() {
				 if($("input[name=staff_nationality]:checked").val() == "내국인"){
			            $("input:text[name=staff_country]").attr("disabled",true);
			            $("input:text[name=staff_country]").val('');
			 
			     }else if($("input[name=staff_nationality]:checked").val() == "외국인"){
			              $("input:text[name=staff_country]").attr("disabled",false);

			     }
			});

	
		});

	</script>
  	
	</th:block>


</html>
