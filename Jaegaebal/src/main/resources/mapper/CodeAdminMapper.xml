<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
   <mapper namespace="kr.or.jaegaebal.mapper.CodeAdminMapper">
   	<resultMap type="CodeAdmin" id="codeResultMap">
   		<result column="w_code" property="workCode"/>
   		<result column="w_name" property="workName"/>
   		<result column="w_use" property="workUseOrNot"/>
   		<result column="w_staff_name" property="workStaffName"/>
   		<result column="w_reg_date" property="workRegDate"/>
   	</resultMap>
   	
   	<!-- 코드수정 -->
   	<update id="updateWorkCode" parameterType="CodeAdmin">
   		UPDATE 
   			gt_work_code
		SET
			w_code = #{workCode},
			w_name = #{workName},
			w_use = #{workUseOrNot},
			w_staff_name = #{workStaffName},
			w_reg_date=NOW()
		WHERE
			w_code=#{workCode}
   	</update>
   	
   	<!-- 코드목록 -->
   	<select id="getWorkCodeList" resultMap="codeResultMap">
   		SELECT 
   			  w_code
   			, w_name
   			, w_use
   			, w_staff_name
   			, w_reg_date
		FROM
			  gt_work_code
   	</select>
   	
   	<!-- 코드조회 -->
   	<select id="getWorkCode" parameterType = "String" resultMap="codeResultMap">
   		SELECT 
   			  w_code
   			, w_name
   			, w_use
   			, w_staff_name
   			, w_reg_date
		FROM
			  gt_work_code
		WHERE
			w_code=#{workCode}
   	</select>
   	
   	<!-- 코드 등록 -->
   	<insert id="addWorkCode" parameterType="CodeAdmin">
   		INSERT INTO 
   			gt_work_code
				 (w_code
				, w_name
				, w_use
				, w_staff_name
				, w_reg_date)
		VALUES
			 (
			 	  #{workCode}
			 	, #{workName}
			 	, #{workUseOrNot}
			 	, #{workStaffName}
			 	, NOW()
			 	
			 )
   	</insert>
   
   </mapper>