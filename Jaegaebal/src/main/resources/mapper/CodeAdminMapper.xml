<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
   <mapper namespace="kr.or.jaegaebal.mapper.CodeAdminMapper">
   
   	<resultMap type="CodeAdmin" id="codeResultMap">
   		<result column="w_code" property="workCode"/>
   		<result column="w_name" property="workName"/>
   		<result column="w_use" property="workUseOrNot"/>
   		<result column="w_staff_name" property="workStaffName"/>
   		<result column="w_reg_date" property="workRegDate"/>
   	</resultMap>
   	
   	<!-- 근무코드 검색 -->
   	<select id="getSearchWorkCodeList" parameterType="String" resultMap="codeResultMap">
	   	SELECT
		   	  w_code
		   	, w_name
		   	, w_use
		   	, w_staff_name
		   	, w_reg_date
		FROM
		 	gt_work_code
		WHERE
			${sk} LIKE CONCAT {'%',#{sv},'%'}
		 
   	</select>
   	
   	<!-- 근무코드삭제 -->
   	<delete id="deleteWorkCode" parameterType="String">
   		DELETE FROM
   			 gt_work_code
   	 	WHERE
   	 		 w_code= #{workCode}
   	</delete>
   	
   	<!-- 근무코드수정 -->
   	<update id="updateWorkCode" parameterType="CodeAdmin">
   		UPDATE 
   			gt_work_code
		SET
			w_code = #{workCode},
			w_name = #{workName},
			w_use = #{workUseOrNot},
			w_staff_name = #{workStaffName},
			w_reg_date=NOW()
		WHERE
			w_code=#{workCode}
   	</update>
   	
   	<!-- 근무코드목록 -->
   	<select id="getWorkCodeList" resultMap="codeResultMap">
   		SELECT 
   			  w_code
   			, w_name
   			, w_use
   			, w_staff_name
   			, w_reg_date
		FROM
			  gt_work_code
   	</select>
   	
   	<!-- 근무코드조회 -->
   	<select id="getWorkCode" parameterType = "String" resultType="CodeAdmin" resultMap="codeResultMap">
   		SELECT 
   			  w_code
   			, w_name
   			, w_use
   			, w_staff_name
   			, w_reg_date
		FROM
			  gt_work_code
		WHERE
			w_code=#{workCode}
   	</select>
   	
   	<!-- 근무코드 등록 -->
   	<insert id="addWorkCode" parameterType="CodeAdmin">
   		INSERT INTO 
   			gt_work_code
				 (w_code
				, w_name
				, w_use
				, w_staff_name
				, w_reg_date)
		VALUES
			 (
			 	  #{workCode}
			 	, #{workName}
			 	, #{workUseOrNot}
			 	, #{workStaffName}
			 	, NOW()
			 	
			 )
   	</insert>
   	
   	<!-- 근무형태코드 중복검사 -->
   	<select id="workCodeCheck" parameterType="String" resultType="String">
		SELECT 
			w_code
		FROM 
			gt_work_code
		WHERE
			w_code = #{workCode} 
	</select>
   
   </mapper>