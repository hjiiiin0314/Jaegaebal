<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.jaegaebal.mapper.ChaeYoungMapper">
	<resultMap type="ChaeYoungBoard" id="ChaeYoungBoardResultMap">
		<result column="job_number" 		property="jobNumber"/>
		<result column="job_field_code" 	property="jobFieldCode"/>
		<result column="job_field_name" 	property="jobFieldName"/>
		<result column="job_title" 			property="jobTitle"/>
		<result column="job_content" 		property="jobContent"/>
		<result column="job_career" 		property="jobCareer"/>
		<result column="job_deadline"		property="jobDeadLine"/>
		<result column="job_reg_date" 		property="jobRegDate"/>
		<result column="job_reg_staff"		property="jobRegStaff"/>
	</resultMap>
	
	<!-- 구인공고 게시글 등록 -->
	<insert id="addCYBoardPost" parameterType="String">
		INSERT INTO cy_job_board(
			job_number
			,job_field_code
			,job_field_name
			,job_title
			,job_content
			,job_career
			,job_deadline
			,job_reg_date
			,job_reg_staff
			)
			VALUES (
			'cy001'
			,#{jobFieldCode}
			,#{jobFieldName}
			,#{jobTitle}
			,#{jobContent}
			,#{jobCareer}
			,#{jobDeadLine}
			,NOW()
			,'개발자'
			)
	</insert>
	<!-- 구인공고 게시글 가져오기 -->
	<select id="cyBoardList" parameterType="String" resultMap="ChaeYoungBoardResultMap">
		SELECT job_number, job_field_code, job_field_name, job_title, job_content, job_career, job_deadline, job_reg_date, job_reg_staff
		FROM cy_job_board
		<!-- 구인공고리스트에서 공고 클릭시 -->
		<if test="jobNumber != null and jobNumber neq ''.toString()">
		WHERE job_number=#{jobNumber}
		</if>
	</select>
	<!-- 지원분야코드 가져오기 -->
	<select id="getFieldeCode" resultType="ChaeYoungCode">
		SELECT 
			field_code 			as fieldCode
			,field_name 		as fieldName
		FROM cy_field_code
	</select>
</mapper>